<!DOCTYPE html>
<html>
<head>
  <title>Flipkart Label Splitter</title>
</head>
<body>
  <h2>Upload Flipkart Label PDF</h2>
  <input type="file" id="pdf">
  <button onclick="splitPDF()">Split PDF</button>
  <div id="download" style="display:none;">
    <h3>Download:</h3>
    <a id="downloadLink" href="#" download>Click here</a>
  </div>

  <script>
    async function splitPDF() {
      const file = document.getElementById('pdf').files[0];
      if (!file) return alert("Please choose a file.");
      const formData = new FormData();
      formData.append('label', file);
      const res = await fetch('/split-label-invoice', { method: 'POST', body: formData });
      const data = await res.json();
      if (data.download) {
        document.getElementById('downloadLink').href = data.download;
        document.getElementById('download').style.display = 'block';
      } else {
        alert("Error: " + data.error);
      }
    }
  </script>
</body>
</html>
