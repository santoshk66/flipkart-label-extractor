<!DOCTYPE html>
<html>
<head>
  <title>Flipkart Label SKU Appender</title>
</head>
<body>
  <h2>Upload Mapping CSV</h2>
  <input type="file" id="csv">
  <button onclick="uploadCSV()">Upload Mapping</button>
  <br><br>

  <h2>Upload Flipkart Label PDF</h2>
  <input type="file" id="pdf">
  <button onclick="processPDF()">Process Label</button>

  <script>
    async function uploadCSV() {
      const file = document.getElementById('csv').files[0];
      const formData = new FormData();
      formData.append('file', file);

      await fetch('/upload-mapping', {
        method: 'POST',
        body: formData
      });
      alert("Mapping uploaded!");
    }

    async function processPDF() {
      const file = document.getElementById('pdf').files[0];
      const formData = new FormData();
      formData.append('label', file);

      const res = await fetch('/process-label', {
        method: 'POST',
        body: formData
      });

      const blob = await res.blob();
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'label_with_sku.pdf';
      link.click();
    }
  </script>
</body>
</html>
